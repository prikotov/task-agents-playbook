# Codex CLI — Шаблоны Issue и PR (Русский)

Используйте эти шаблоны для задач и PR в соответствии с AGENTS.md и процессом Codex CLI.

## Фича (Issue)

Заголовок: feat(<module>): <краткое описание>

- Цель: <какой результат даёт фича>
- Модуль/Слой: <ModuleName> — <Domain|Application|Infrastructure|Integration>
- Контекст: PHP 8.3, Symfony 7.3, ссылки (issues/спеки)
- Критерии приёмки:
  - <критерий 1>
  - <критерий 2>
- Область: <что входит>
- Вне области: <что исключено>
- Архитектура: соблюсти DDD; контроллеры вызывают только UseCase; нет Domain ← Infrastructure
- Данные и API:
  - Влияние на БД: <нет/описать миграции>
  - Контракты: <DTO/события/сообщения>
- План тестирования:
  - Unit: <классы/VO/UseCase>
  - Integration: <адаптеры/handlers/репозитории с фейками>
  - E2E (при необходимости): <web/api/console сценарий>
- Риски/Компромиссы: <заметки>
- Откат: <как отключить/вернуть>

## Баг (Issue)

Заголовок: fix(<module>): <симптом или падающий путь>

- Версии: PHP 8.3, Symfony 7.3
- Репро: <точные шаги или падающий тест>
- Фактический результат: <что происходит>
- Ожидаемый результат: <как должно быть>
- Область: <где менять>
- Логи/Артефакты: <стек/вывод тестов>
- Тесты: unit воспроизводит баг; integration проверяет взаимодействие

## Шаблон Pull Request

Заголовок: <type>(<scope>): <summary>

- Суть изменений: <что и зачем>
- Затронутые модули/слои: <список>
- Изменения:
  - Код: <ключевые пункты>
  - Миграции/Конфиг: <если есть>
  - Публичный API: <новое/изменено/удалено>
- Тесты:
  - Unit: <добавлено/изменено>
  - Integration: <добавлено/изменено>
  - Покрытие: ≥80% для нового кода
- Проверки (вставить вывод):
  - `make tests-unit`: <результат>
  - `make psalm`: <результат>
  - `make phpcs`: <результат>
  - `make deptrac`: <результат>
  - `make audit`: <результат>
- Архитектура: соблюдены DDD‑границы; нет утечек между слоями
- Временные решения: `@todo`/`@techdebt` с датой и причиной
- Риски/Совместимость: <заметки>
- Ссылки: <issues/доки/разделы AGENTS.md>

